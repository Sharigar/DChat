<!DOCTYPE html>
<!--
/****************************************************
 *
 *  Copyright 2012 DENIVIP Media.  All Rights Reserved.
 *
 *****************************************************
 *
 *  Created by - Vladimir Semenyuk vladimir@denivip.ru
 *  Version 1.0.0
 *
 *****************************************************/
-->
<html>
<head>
    <meta content="text/html" charset="utf-8">

    <title>DChat</title>

    <link rel="stylesheet" type="text/css" href="css/style.css">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://underscorejs.org/underscore-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.7.0/mustache.min.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/utils-date.js"></script>
</head>

<body  id="top">

    <div class="anchors">
        <a href="#top" class="anchor anchor_link">Top</a>
        <a href="#chat" class="anchor anchor_link">Demo</a>

        <a href="https://github.com/denivip/DChat/tarball/master" class="anchor anchor_download">.TAR</a>
        <a href="https://github.com/denivip/DChat/zipball/master" class="anchor anchor_download">.ZIP</a>

        <a href="https://github.com/denivip/DChat" class="anchor anchor_github">Fork Me</a>
    </div>

    <div class="header">
        <div class="title">DChat</div>

        <div class="description">
            Node.js chat service based on websockets. <br />
            Fast. Highload. Cool.
        </div>
    </div>

    <div class="wrapper">

        <div class="about" id="about">

            <h2>
                <a name="features" class="" href="#features"><span class="mini-icon mini-icon-link"></span></a>Features</h2>

            <img src="images/arch.jpg" class="arch">

            <ul>
                <li>Operates on both websocket and flashsocket client.</li>
                <li>It starts several chat processes, equal the number of your CPUs.</li>
                <li>All communications between chat instances are provided via Redis pub/sub.</li>
                <li>Operates with several Redis instances via hashring.</li>
                <li>Provide unlimited number of chat rooms.</li>
                <li>Store message history, delete old messages after the time has passed.</li>
                <li>Provide users-per-room counting.</li>
                <li>Read-only user mode for load reduction.</li>
            </ul>



            <h2>
                <a name="load-capabilities" class="" href="#load-capabilities"><span class="mini-icon mini-icon-link"></span></a>Load Capabilities</h2>

            <p>Max connection count is limited by 'ulimit' and amount of memory.
                Each connection you expect should be provided with 1 MB of RAM.</p>

            <p>Max number of clients is also limited by CPU.
                Small test on ubuntu VM with 4 CPUs (2.5 GHz Intel Core i5) showed,
                that 30.000 is ok. </p>

            <h2>
                <a name="requirements" class="" href="#requirements"><span class="mini-icon mini-icon-link"></span></a>Requirements</h2>

            <ul>
                <li>
                    <a href="http://nodejs.org/">Node.js</a> &gt;= 0.8.0 (KO, thank you!) </li>
                <li><a href="http://redis.io/">Redis</a></li>
            </ul><h2>
                <a name="nodejs-modules" class="" href="#nodejs-modules"><span class="mini-icon mini-icon-link"></span></a>Node.js Modules</h2>

            <ul>
                <li>websocket &gt;= 1.0.7</li>
                <li>
                    <a href="http://redis.io/">redis</a> &gt;= 0.7.1</li>
                <li>hash_ring &gt;= 0.2.0</li>
                <li>policyfile &gt;= 0.0.5 (For flash policy)</li>
                <li>
                    <a href="http://www.mongodb.org/">mongodb</a> &gt;= 1.1.8 (Only for utility purposes. Chat uses ObjectID for the generation of connection IDs)</li>
                <li>
                    <a href="http://underscorejs.org/">underscore</a> &gt;= 1.4.1 (For cool object-operating methods)</li>
            </ul><p>All Node.js modules should be installed by 'npm install'.</p>

            <h2>
                <a name="be-careful" class="" href="#be-careful"><span class="mini-icon mini-icon-link"></span></a>Be careful!</h2>

            <p>All redis '*:users_count' collections should be deleted before chat is started
                for correct user counting. </p>

            <h2>
                <a name="suggestions-and-feedback" class="" href="#suggestions-and-feedback"><span class="mini-icon mini-icon-link"></span></a>Suggestions and Feedback</h2>

            <p>We will be very pleased if you'll send us some feedback, suggestions and feature-request on our <a href="https://github.com/denivip/DChat">Github page</a>.
                It surely will help this project to evolve. </p>

            <h1 id="chat">Demo</h1>
        </div>



        <div class="chat" >

            <div class="login">
                You are logged as
                <span class="login-nickname"></span>

                <input id="nick-input">
            </div>

            <div class='menu'>
                <span class="menu-item room" data-value="room1">Room 1</span>
                <span class="menu-item room" data-value="room2">Room 2</span>
                <span class="menu-item room" data-value="room3">Room 3</span>

                <span class="users-count">Users: <span class="users-count__count">0</span></span>
            </div>

            <div class='chat-messages'>
            </div>

            <div class='footer'>
                <input id="message">
                <div id="submit">Send</div>
            </div>

            <div class="invis">
                <div class="msg-tpl">
                    <div class="chat-message  {{#system}} chat-message_system{{/system}} {{#even}} chat-message_even{{/even}}">
                    {{#system}}
                    <span>{{nick}}</span> {{message}}
                    {{/system}}

                    {{^system}}
                    <div class="chat-time">{{time}}</div>
                    <div class="chat-name">{{name}}:</div>
                    <div class="chat-text">{{text}}</div>
                    {{/system}}
                </div></div>

            </div>

        </div>

        <div class="bottom">
            <a href="http://www.denivip.ru/en">DENIVIP Media</a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a href="http://blog.denivip.ru/?lang=en">Blog@DENIVIP</a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a href="https://github.com/denivip/DChat">Fork It on Github</a>
        </div>

    </div>

</body>
</html>